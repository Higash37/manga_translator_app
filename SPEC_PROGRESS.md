# 漫画翻訳＆クイズアプリ 仕様・進捗まとめ

---

## 1. 現状の仕様・実装状況

### ● 全体設計

- 多言語対応（日本語・英語・中国語）
- Jump+風 UI、青系テーマカラー
- クイズ機能（漫画内容に基づく理解度チェック）

### ● バックエンド（Firebase Functions & Firestore）

- Firestore 構造設計（comics, episodes, pages, quizzes, users）
- API 実装（TypeScript/Express）
  - 漫画一覧・詳細・話・ページ取得
  - クイズ取得・解答
  - 画像アップロード・削除・一覧
  - ユーザー認証ミドルウェア（開発用バイパス）
- サンプルデータ自動投入スクリプト

### ● フロントエンド（Flutter）

- ホーム画面（クイズ＋漫画リスト統合、青テーマ）
- 漫画一覧・詳細・話リスト
- 漫画リーダー（ページ送り、言語切替 FAB、UI スケーリング、直感ナビ）
- クイズ画面（出題・選択・解説・結果）
- クイズ専用ホーム画面
- API サービス層・モデルクラス実装
- UI 色統一（青系）

### ● 開発環境

- Firebase Emulator セットアップ
- TypeScript/Flutter ビルドエラー修正
- エラー時のフォールバックデータ対応

---

## 2. 今後やること（TODO）

### ● ユーザー機能

- [ ] Firebase Auth によるユーザー認証（Flutter/Functions 両方）
- [ ] ユーザーごとの進捗・履歴・お気に入り管理
- [ ] コメント・いいね・ランキング・バッジ機能

### ● クイズ機能拡張

- [ ] ユーザーによるクイズ作成フォーム（まずは日本語のみ）
- [ ] クイズの難易度・ジャンル分け
- [ ] クイズ進捗・正答率管理
- [ ] クイズのランキング・バッジ表示

### ● 検索・フィルタ

- [ ] 漫画・クイズの検索・絞り込み

### ● AI 翻訳・サポート

- [ ] AI 翻訳 API 連携（DeepL, Google, ChatGPT 等）
- [ ] 吹き出し単位での AI 翻訳・解説
- [ ] 分からない単語・表現の AI 解説

### ● UI/UX 改善

- [ ] レスポンシブ対応（スマホ・タブレット・PC）
- [ ] アクセシビリティ対応
- [ ] 画像マスク・吹き出し編集 UI（ドラッグ＆ドロップ）

### ● その他

- [ ] 本番用の Firestore/Storage 構成
- [ ] 本番データ投入・管理ツール
- [ ] テスト（ユニット・結合・E2E）

---

## 3. 直近のおすすめタスク

1. ユーザー認証の本実装
2. クイズ作成フォームの実装
3. 進捗・バッジ・ランキングの設計＆実装
4. AI 翻訳 API の調査・試験実装
5. UI/UX の細部ブラッシュアップ

---

> 進捗や仕様の追加・修正があればこのファイルに追記してください。

---

# 📘 漫画翻訳アプリ 拡張仕様書（認知科学・協同学習対応）

## 🔰 アプリの基本概要

| 項目           | 内容                                                                                   |
| -------------- | -------------------------------------------------------------------------------------- |
| アプリ名（仮） | 多言語漫画ラボ                                                                         |
| 目的           | 漫画を通じて多言語学習・相互理解・翻訳力を高める                                       |
| 主対象         | 日本人学習者 ＆ 日本語学習中の外国人                                                   |
| 翻訳方針       | プロによる翻訳を手動入力（AI 翻訳は使用しない）                                        |
| 技術構成       | Firebase（Storage / Firestore）、Flutter または React Native、OpenAI API（感情変換用） |

---

## 🧩 機能一覧

| 機能カテゴリ        | 概要                                                                 |
| ------------------- | -------------------------------------------------------------------- |
| 1. 漫画表示         | 多言語切り替え対応（中央下ボタンで即時切り替え）                     |
| 2. クイズ挿入       | 各話末に理解度確認クイズ（多言語対応・ユーザー作成可）               |
| 3. 問題作成         | 話数・画像に基づく多言語クイズ投稿機能（翻訳は手動入力）             |
| 4. 言語感チャレンジ | 「この言葉を ◯◯ 風に言い換えて！」と感情トーン変換をリクエストできる |
| 5. 共訳・添削       | ペアやグループで 1 話の翻訳や解説を共同作成、レビュー                |
| 6. ゲーム要素       | 経験値、バッジ、ランキング、翻訳バトル、評価スコア等                 |
| 7. 相互評価         | 投稿・翻訳・言い換えに対する「いいね」や「役立った」ボタン           |

---

## ✏️ 仕様詳細

### 1. 多言語漫画表示

| 項目             | 内容                                                    |
| ---------------- | ------------------------------------------------------- |
| 表示形式         | ページめくり型（縦 or 横スクロール）                    |
| 言語切替         | ボタンで `ja` → `en` → `zh` を切り替え                  |
| 吹き出しテキスト | Cloud Storage の画像 + Firestore のテキストを重ねて表示 |

---

### 2. 多言語クイズ（各話末）

| 項目           | 内容                                                                      |
| -------------- | ------------------------------------------------------------------------- |
| クイズ形式     | 単一選択（4 択）＋解説                                                    |
| 言語対応       | 日本語・英語・中国語（手動入力）                                          |
| Firestore 構造 | `question`, `choices`, `correctIndex`, `explanation` に言語キー付きで保存 |
| UI             | クイズカード UI → 回答 → 正解表示＆解説 → バッジ付与 or 経験値加算        |

---

### 3. ユーザー問題作成

| 項目       | 内容                                                     |
| ---------- | -------------------------------------------------------- |
| 入力項目   | 話数、該当コマ画像、問題文（各言語）、選択肢、正解、解説 |
| プレビュー | 実際の表示形式で確認可能                                 |
| 投稿       | Firestore に保存、他ユーザーにも表示される               |
| バッジ     | 「初投稿」「100 人解答」など実績獲得型                   |

---

### 4. 言語感チャレンジ（感情的言い換え）

| 機能名（仮） | 「感情しりとり」「ことばの温度差」など |
| UI 構成 |

- フリーテキスト + 感情カテゴリ選択（例：「寂しい」「怒ってる」「照れてる」など）
- 送信 → 相手が返す or AI が候補を生成
- 返信を評価（「伝わる！」「刺さる！」ボタン）
  | AI 連携 | OpenAI API で感情トーン変換（例：悲しげな“ありがとう”） |
  | 学習効果 | 表現の幅・語感・文化的背景に気づくトレーニングになる |

---

### 5. 共訳・協同学習機能

| 概要 | 複数ユーザーで 1 話の翻訳を分担し、レビューし合う |
| 翻訳対象 | セリフ / ナレーション / 解説 / クイズなど |
| UI 案 | Trello 風カードで役割を分担し、翻訳作業を進行 |
| 教育効果 | 協同的意味形成・メタ認知・相互足場かけを促進 |

---

### 6. ゲーミフィケーション機能

| 要素         | 説明                                               |
| ------------ | -------------------------------------------------- |
| 経験値       | クイズ解答、問題作成、フィードバックで加算         |
| バッジ       | 投稿・高評価・翻訳回数などで獲得（例：「翻訳王」） |
| スコア可視化 | 自分と他者の貢献度・進捗・得意言語を表示           |

---

## 🎓 学習理論ベースの設計指針

| 観点         | 取り入れ方                                         |
| ------------ | -------------------------------------------------- |
| 認知的徒弟制 | 上手いユーザーの翻訳例・言い換え例が見れる         |
| 協同構成主義 | 翻訳・クイズを共同で作る機能                       |
| メタ認知支援 | 「なぜこの訳にしたか」をコメント・プロンプトで促す |
| 社会文化理論 | 文脈（漫画）を通じた自然な言語使用＆対話           |
| 多言語的思考 | 翻訳過程での文化差・語感差への気づき支援           |

---

## ✅ 次に進める実装フェーズ案

| フェーズ | 内容                                                |
| -------- | --------------------------------------------------- |
| Phase 1  | 漫画表示（翻訳切替付き）＋クイズ投稿/表示           |
| Phase 2  | 言語感チャレンジ機能の実装（感情言い換え API 連携） |
| Phase 3  | 共訳・翻訳レビュー機能の追加                        |
| Phase 4  | ゲーム性（経験値・バッジ・ランキング）の導入        |

---
